
trigger: none
pool: 
    vmImage: 'ubuntu-latest'
    
resources:
  containers:
  - container: centlatest
    image: centos:latest
    
# root scope for var template
variables:
- template: /variables/global_vars.yml

stages:
- stage: validate_jdk_preview_lab
  jobs:
  - job: validate_jdk_preview_lab 
    displayName: Validate Preview Lab Pipeline Run Results
    pool: server
    steps:
    - task: ManualValidation@0
      timeoutInMinutes: 1 # task times out in 1 day
      inputs:
        notifyUsers: |
          mehrdad.hazeghi@nuance.com
        instructions: 'Important: Activate ONLY AFTER confirming the Lab pipeline has run and verifying the run results/logs!!!'
        onTimeout: 'resume'
  - job: fail_pipeline
    displayName: Fail Pipeline On Manual Validation Refusal
    container: terraform_image_container
    dependsOn: validate_jdk_preview_lab
    condition: failed()
    steps:
    - script: |
        echo "manual validaton of lab preview pipeline failed, exiting the pipeline"
        exit 1
- stage: RunInContainerStage
  jobs:
  - job: RunInContainerJob
    timeoutInMinutes: 1
    steps:
    - script: |
        echo "RunInContainerStage RunInContainerStage RunInContainerStage RunInContainerStage RunInContainerStage RunInContainerStage"

